<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div>
    <div class="actions" id="actions_1">
        <h2>sys</h2>
        <button class="start">start</button>
        <button class="pause">pause</button>
        <button class="resume">resume</button>
        <button class="stop">stop</button>
        <div>
            <p id="time_1"></p>
        </div>
    </div>
    <div class="actions" id="actions_2">
        <h2>mock</h2>
        <button class="start">start</button>
        <button class="pause">pause</button>
        <button class="resume">resume</button>
        <button class="stop">stop</button>
        <div>
            <p id="time_2"></p>
        </div>
    </div>
</div>
<script src="./src/timer.js"></script>
<script>

    function init(actions_id, timer) {
        document.getElementById(actions_id).addEventListener('click', e => {
            let target = e.target;
            if (target.tagName.toUpperCase() === 'BUTTON') {
                timer[target.className]();
            }
        }, false);
    }

    import((function () {
        return './src/clock.sys.js';
    })()).then(({Clock}) => {
        let time = document.getElementById('time_1');
        let timer = new Timer2({clock: new Clock()})
            .onStarted((t, fly) => {
                console.log('onStarted', fly);
            }).onTick((t, data) => {
                console.log('onTick', data);
                time.innerText += `${data.realFly}/${data.expectFly},`;
            }).onPaused((t, fly) => {
                console.log('onPaused', fly);
            }).onResumed((t, fly) => {
                console.log('onResumed', fly);
            }).onStopped((t, fly) => {
                console.log('onStopped', fly);
            });
        init('actions_1', timer);
    });


    import((function () {
        return './src/clock.mock.js';
    })()).then(({Clock}) => {
        let time = document.getElementById('time_2');
        window.clock = new Clock();
        let timer = new Timer2({interval: 5000, clock: window.clock})
            .onStarted((t, fly) => {
                console.log('onStarted', fly);
            }).onTick((t, data) => {
                console.log('onTick', data);
                time.innerText += `${data.realFly}/${data.expectFly},`;
            }).onPaused((t, fly) => {
                console.log('onPaused', fly);
            }).onResumed((t, fly) => {
                console.log('onResumed', fly);
            }).onStopped((t, fly) => {
                console.log('onStopped', fly);
            });
        init('actions_2', timer);
    });
</script>
</body>
</html>
